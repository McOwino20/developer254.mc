<form id="feedbackForm" method="POST" action="https://formspree.io/f/mgegvboj">
    <textarea name="feedback" required></textarea>
    <input type="hidden" name="datetime_submitted" id="datetime_submitted">
    <input type="hidden" name="location" id="location">
    <input type="hidden" name="device_type" id="device_type">
    <input type="hidden" name="network_provider" id="network_provider">
    <input type="hidden" name="user_agent" id="user_agent">
    <input type="hidden" name="connection_type" id="connection_type">
    <button type="submit">Submit</button>
</form>

<script>
    // Capture Date and Time
    document.getElementById('datetime_submitted').value = new Date().toISOString();

    // Fetch Geolocation Data
    fetch('https://ipinfo.io/json?token=1a4beeb8578f3b')
    .then(response => response.json())
    .then(data => {
        document.getElementById('location').value = data.city + ', ' + data.region + ', ' + data.country;
        document.getElementById('network_provider').value = data.org;
    });

    // Detect Device Type
    let deviceType = "Unknown";
    if (navigator.userAgent.match(/mobile/i)) {
        deviceType = "Mobile";
    } else if (navigator.userAgent.match(/tablet/i)) {
        deviceType = "Tablet";
    } else {
        deviceType = "Desktop";
    }
    document.getElementById('device_type').value = deviceType;
    // Capture User Agent
    document.getElementById('user_agent').value = navigator.userAgent;
    // Capture Connection Type
    function getConnectionType() {
        let connectionType = "Unknown";

        if (navigator.connection) {
            const type = navigator.connection.effectiveType;
            
            if (type === "wifi") {
                connectionType = "WiFi";
            } else if (type === "cellular") {
                connectionType = "Cellular";
            } else if (type === "ethernet") {
                connectionType = "Ethernet";
            } else if (type === "none") {
                connectionType = "No connection";
            } else {
                connectionType = type.charAt(0).toUpperCase() + type.slice(1); // Capitalize first letter
            }
        } else {
            connectionType = "Not supported by this browser";
        }

        document.getElementById('connection_type').value = connectionType;
    }

    document.addEventListener("DOMContentLoaded", function() {
        getConnectionType();
        getLocation();
    });
</script>
